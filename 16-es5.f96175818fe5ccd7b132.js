function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"ct+p":function(e,t,n){"use strict";n.r(t),n.d(t,"HomePageModule",(function(){return g}));var r=n("ofXK"),i=n("TEn/"),o=n("3Pt+"),a=n("tyNb"),s=n("mrSG"),c=n("fXoL"),l=n("WOgW"),u=["video"],d=["canvas"];function p(e,t){if(1&e&&(c.Mb(0,"li"),c.Kb(1,"img",13),c.Lb()),2&e){var n=t.$implicit;c.zb(1),c.Yb("src",n,c.ac)}}var h,f,b,v=[{path:"",component:(h=function(){function e(t,n){_classCallCheck(this,e),this.androidPermissions=t,this.platform=n,this.shouldFaceUser=!0,this.stream=null,this.track=null,this.captures=[]}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngAfterViewInit",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.platform.ready().then((function(){t.platform.is("cordova")&&t.platform.is("android")?t.androidPermissions.requestPermissions([t.androidPermissions.PERMISSION.CAMERA,t.androidPermissions.PERMISSION.MODIFY_AUDIO_SETTINGS,t.androidPermissions.PERMISSION.RECORD_AUDIO]).then((function(){console.log("permissions asked"),t.initCamera()})):t.initCamera()}));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"initCamera",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({video:{facingMode:this.shouldFaceUser?"user":"environment"}});case 3:this.stream=e.sent,this.track=this.stream.getVideoTracks()[0],this.video.nativeElement.srcObject=this.stream,this.video.nativeElement.play(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error("******"),console.error(e.t0),console.error("******"),this.error=e.t0,"NotFoundError"===e.t0.name||"DevicesNotFoundError"===e.t0.name?this.error="Devices not found":"NotReadableError"===e.t0.name||"TrackStartError"===e.t0.name?this.error="Devices not readable or already in use":"OverconstrainedError"===e.t0.name||"ConstraintNotSatisfiedError"===e.t0.name?this.error="Constraints not accepted":"NotAllowedError"===e.t0.name||"PermissionDeniedError"===e.t0.name?this.error="Permission denied":"TypeError"!==e.t0.name&&"TypeError"!==e.t0.name||(this.error="Constraints error");case 12:case"end":return e.stop()}}),e,this,[[0,9]])})))}},{key:"capture",value:function(){this.canvas.nativeElement.getContext("2d").drawImage(this.video.nativeElement,0,0,640,480),this.captures.push(this.canvas.nativeElement.toDataURL("image/png"))}},{key:"flip",value:function(){null!=this.stream&&(this.stream.getTracks().forEach((function(e){e.stop()})),this.shouldFaceUser=!this.shouldFaceUser,this.initCamera())}},{key:"toggleFlash",value:function(){this.track.applyConstraints({advanced:[{torch:!0}]}).catch((function(e){return console.log(e)}))}}]),e}(),h.\u0275fac=function(e){return new(e||h)(c.Jb(l.a),c.Jb(i.j))},h.\u0275cmp=c.Db({type:h,selectors:[["app-home"]],viewQuery:function(e,t){var n;1&e&&(c.fc(u,!0),c.fc(d,!0)),2&e&&(c.Zb(n=c.Ub())&&(t.video=n.first),c.Zb(n=c.Ub())&&(t.canvas=n.first))},decls:23,vars:4,consts:[[3,"translucent"],[3,"fullscreen"],["id","app"],[1,"video-wrapper"],[1,"square-wrapper"],[1,"square"],["id","video","width","320","height","240","autoplay",""],["video",""],["id","snap",3,"click"],["id","canvas","width","640","height","480"],["canvas",""],[3,"click"],[4,"ngFor","ngForOf"],["height","50",3,"src"]],template:function(e,t){1&e&&(c.Mb(0,"ion-header",0),c.Mb(1,"ion-toolbar"),c.Mb(2,"ion-title"),c.dc(3," Blank "),c.Lb(),c.Lb(),c.Lb(),c.Mb(4,"ion-content",1),c.Mb(5,"div",2),c.Mb(6,"div",3),c.Mb(7,"div",4),c.Kb(8,"div",5),c.Lb(),c.Kb(9,"video",6,7),c.Lb(),c.Mb(11,"div"),c.Mb(12,"button",8),c.Tb("click",(function(){return t.capture()})),c.dc(13,"Snap Photo"),c.Lb(),c.Lb(),c.Kb(14,"canvas",9,10),c.Mb(16,"ion-button",11),c.Tb("click",(function(){return t.flip()})),c.dc(17,"Flip"),c.Lb(),c.Mb(18,"ion-button",11),c.Tb("click",(function(){return t.toggleFlash()})),c.dc(19,"Flash"),c.Lb(),c.Mb(20,"ul"),c.cc(21,p,2,1,"li",12),c.Lb(),c.dc(22),c.Lb(),c.Lb()),2&e&&(c.Xb("translucent",!0),c.zb(4),c.Xb("fullscreen",!0),c.zb(17),c.Xb("ngForOf",t.captures),c.zb(1),c.ec(" ",t.error," "))},directives:[i.d,i.g,i.f,i.c,i.b,r.h],styles:["body[_ngcontent-%COMP%]{background-color:#f0f0f0}#app[_ngcontent-%COMP%]{text-align:center;color:#2c3e50;margin-top:60px}#video[_ngcontent-%COMP%]{background-color:#000}#canvas[_ngcontent-%COMP%]{display:none}li[_ngcontent-%COMP%]{display:inline;padding:5px}.video-wrapper[_ngcontent-%COMP%]{position:relative}.square[_ngcontent-%COMP%]{width:140px;height:180px;border:2px solid #f7ff00}.square-wrapper[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%)}"]}),h)}],m=((b=function e(){_classCallCheck(this,e)}).\u0275mod=c.Hb({type:b}),b.\u0275inj=c.Gb({factory:function(e){return new(e||b)},imports:[[a.i.forChild(v)],a.i]}),b),g=((f=function e(){_classCallCheck(this,e)}).\u0275mod=c.Hb({type:f}),f.\u0275inj=c.Gb({factory:function(e){return new(e||f)},imports:[[r.b,o.a,i.h,m]]}),f)}}]);